# Nginx Proxy Manager - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

## –ß—Ç–æ —Ç–∞–∫–æ–µ Nginx Proxy Manager?

Nginx Proxy Manager (NPM) - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ–π –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω—ã–º –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- üîí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ—Ç Let's Encrypt
- üåê –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º —Å–µ—Ä–≤–∏—Å–∞–º
- üõ°Ô∏è –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∑–∞—â–∏—Ç—É –¥–æ—Å—Ç—É–ø–∞
- üìä –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –ª–æ–≥–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

## –î–æ—Å—Ç—É–ø –∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

**URL:** http://localhost:81

### –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞:

```
Email:    admin@example.com
Password: changeme
```

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ø—Ä–æ—Å–∏—Ç –∏–∑–º–µ–Ω–∏—Ç—å email –∏ –ø–∞—Ä–æ–ª—å!

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –®–∞–≥ 1: –í–æ–π—Ç–∏ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ http://localhost:81

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å Proxy Host

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"Proxy Hosts"**
2. –ù–∞–∂–º–∏—Ç–µ **"Add Proxy Host"**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:

   **Details:**
   - Domain Names: `–≤–∞—à-–¥–æ–º–µ–Ω.com` –∏–ª–∏ `localhost` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
   - Scheme: `http`
   - Forward Hostname / IP: `web` (–∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ FastAPI)
   - Forward Port: `8000`
   - ‚úÖ Cache Assets
   - ‚úÖ Block Common Exploits
   - ‚úÖ Websockets Support (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ WebSockets)

   **SSL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞):**
   - ‚úÖ Request a new SSL Certificate
   - ‚úÖ Force SSL
   - ‚úÖ HTTP/2 Support
   - Email: –≤–∞—à@email.com
   - ‚úÖ I Agree to the Let's Encrypt Terms of Service

4. –ù–∞–∂–º–∏—Ç–µ **"Save"**

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

–ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ:

- **HTTP:** http://–≤–∞—à-–¥–æ–º–µ–Ω.com
- **HTTPS:** https://–≤–∞—à-–¥–æ–º–µ–Ω.com (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ SSL)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–µ–∑ –¥–æ–º–µ–Ω–∞:

1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Proxy Host –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
   - Domain Names: `localhost`
   - Forward Hostname: `web`
   - Forward Port: `8000`

2. –ù–µ –≤–∫–ª—é—á–∞–π—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ http://localhost (–ø–æ—Ä—Ç 80)

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### Access Lists (–°–ø–∏—Å–∫–∏ –¥–æ—Å—Ç—É–ø–∞)

–ú–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"Access Lists"**
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–∞
3. –î–æ–±–∞–≤—å—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (Basic Auth, IP Whitelist)
4. –ü—Ä–∏–≤—è–∂–∏—Ç–µ –∫ Proxy Host

### Custom Locations (–ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã)

–ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞–∑–Ω—ã–µ –±—ç–∫–µ–Ω–¥—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—É—Ç–µ–π:

```
/api        -> web:8000
/admin      -> admin:3000
/static     -> static-server:80
```

## –ü–æ—Ä—Ç—ã

| –°–µ—Ä–≤–∏—Å | –ü–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|----------|
| HTTP | 80 | –û—Å–Ω–æ–≤–Ω–æ–π –≤–µ–±-—Ç—Ä–∞—Ñ–∏–∫ |
| HTTPS | 443 | –ó–∞—â–∏—â—ë–Ω–Ω—ã–π –≤–µ–±-—Ç—Ä–∞—Ñ–∏–∫ |
| Admin UI | 81 | –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è |

–ü–æ—Ä—Ç—ã –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ —Ñ–∞–π–ª–µ `.env`:

```env
NPM_HTTP_PORT=80
NPM_HTTPS_PORT=443
NPM_ADMIN_PORT=81
```

## Volumes (–î–∞–Ω–Ω—ã–µ)

NPM –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 2 volume –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:

- `npm_data` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- `npm_letsencrypt` - SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

## Troubleshooting

### –ù–µ –º–æ–≥—É –∑–∞–π—Ç–∏ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```bash
docker-compose ps
docker-compose logs nginx-proxy-manager
```

### SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –≤—ã–¥–∞—ë—Ç—Å—è

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä (A-–∑–∞–ø–∏—Å—å)
2. –ü–æ—Ä—Ç—ã 80 –∏ 443 –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs nginx-proxy-manager`

### 502 Bad Gateway

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä `web` –∑–∞–ø—É—â–µ–Ω: `docker-compose ps`
2. –ü—Ä–∞–≤–∏–ª—å–Ω–æ —É–∫–∞–∑–∞–Ω–æ –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: `web` (–Ω–µ `localhost`)
3. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç: `8000`

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://nginxproxymanager.com/guide/)
- [GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π](https://github.com/NginxProxyManager/nginx-proxy-manager)
